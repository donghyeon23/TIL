
## ğŸ¤” CORS ë€?

---

**ë„ë©”ì¸ ë˜ëŠ” í¬íŠ¸ê°€ ë‹¤ë¥¸ ì„œë²„ì˜ ìì›ì„ ìš”ì²­í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜**

**`êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ (Cross-Origin Resource Sharing, CORS)`**ëŠ” ì¶”ê°€ HTTP í—¤ë”ë¥¼ ì‚¬ìš©í•˜ì—¬, í•œ ì¶œì²˜ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë‹¤ë¥¸ ì¶œì²˜ì˜ ì„ íƒí•œ ìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•˜ë„ë¡ ë¸Œë¼ìš°ì €ì— ì•Œë ¤ì£¼ëŠ” ì²´ì œ

- **cross-origin**

`cross-origin`ì´ë€ ë‹¤ìŒ ì¤‘ í•œ ê°€ì§€ë¼ë„ ë‹¤ë¥¸ ê²½ìš°ë¥¼ ë§í•©ë‹ˆë‹¤.

1. í”„ë¡œí† ì½œ - httpì™€ httpsëŠ” í”„ë¡œí† ì½œì´ ë‹¤ë¥´ë‹¤.
2. ë„ë©”ì¸ - domain.comê³¼ other-domain.comì€ ë‹¤ë¥´ë‹¤.
3. í¬íŠ¸ ë²ˆí˜¸ - 8080í¬íŠ¸ì™€ 3000í¬íŠ¸ëŠ” ë‹¤ë¥´ë‹¤.

> **ë¸Œë¼ìš°ì €ëŠ” ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì‹œì‘ëœ êµì°¨ ì¶œì²˜ì— ëŒ€í•œ HTTP ìš”ì²­ì„ ì œí•œí•œë‹¤.**
> 

## ğŸ¦¿ CORSëŠ” ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ê°€?

---

1. ê¸°ë³¸ì ìœ¼ë¡œ ì›¹ì€ ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ë•ŒëŠ” HTTP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ì„ í•˜ëŠ”ë°,ì´ë•Œ ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ í—¤ë” (request header)ì—Â **`Origin`**Â í•„ë“œì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ì¶œì²˜ë¥¼ ë‹´ì•„ ì „ì†¡í•œë‹¤.
2. ì„œë²„ëŠ” ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ í•˜ëŠ”ë°, ì‘ë‹µ í—¤ë” (response header)ì—Â **`Access-Control-Allow-Origin`**ì´ë¼ëŠ” ê°’ì— 'ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ í—ˆìš©ëœ ì¶œì²˜'ë¥¼ ë‚´ë ¤ì¤€ë‹¤.ì´í›„ ì‘ë‹µì„ ë°›ì€ ë¸Œë¼ìš°ì €ëŠ” ìì‹ ì´ ë³´ëƒˆë˜ ìš”ì²­ì˜ Originê³¼ ì„œë²„ê°€ ë³´ë‚´ì¤€ ì‘ë‹µì˜Â **`Access-Control-Allow-Origin`**ì„ ë¹„êµí•´ ë³¸ í›„ ì´ ì‘ë‹µì´ ìœ íš¨í•œ ì‘ë‹µì¸ì§€ ì•„ë‹Œì§€ë¥¼ ê²°ì •í•œë‹¤.

> ğŸ‘‰ğŸ» ì´ê²ƒì´ ê¸°ë³¸ì ì¸ CORS ë™ì‘ì˜ íë¦„ì´ë‹¤. í•˜ì§€ë§Œ ëª¨ë“  CORS ë™ì‘ì˜ ë°©ì‹ì€ ì•„ë‹ˆë‹¤.
> 

## ğŸï¸Â CORS ë™ì‘ì˜ ì‹œë‚˜ë¦¬ì˜¤

---

### Prefilght Request

**`Preflight`**Â ë°©ì‹ì€, ìš”ì²­ì„ í•œë²ˆì— ë³´ë‚´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì˜ˆë¹„ ìš”ì²­ê³¼ ë³¸ ìš”ì²­ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ ì„œë²„ë¡œ ì „ì†¡í•œë‹¤.ë³¸ ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ ë¯¸ë¦¬ ì˜ˆë¹„ë¡œ ë³´ë‚´ëŠ” ìš”ì²­ì„Â **`Preflight`**ë¼ê³  í•˜ë©°, HTTP ë©”ì„œë“œ ì¤‘ í•˜ë‚˜ì¸Â **`OPTIONS`**Â ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤.

> ğŸ‘‰ğŸ»Â WHY?ì˜ˆë¹„ ìš”ì²­ì„ í•¨ìœ¼ë¡œì¨ ë³¸ ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ ë¸Œë¼ìš°ì € ìŠ¤ìŠ¤ë¡œê°€ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì— ëŒ€í•œ ì•ˆì „ì„±ì„ í™•ì¸í•¨ì— ìˆë‹¤.ì„œë²„ëŠ” ì´ ì˜ˆë¹„ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ í˜„ì¬ ìì‹ ì´ ì–´ë–¤ ê²ƒë“¤ì„ í—ˆìš© í•˜ê³ , ì–´ë–¤ ê²ƒë“¤ì„ ê¸ˆì§€í•˜ê³  ìˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì‘ë‹µ í—¤ë”ì— ë‹´ì•„ì„œ ë¸Œë¼ìš°ì €ì—ê²Œ ë‹¤ì‹œ ë³´ë‚´ì¤€ë‹¤.
> 

ë‹¨ìˆœíˆÂ **`Origin`**ì— ëŒ€í•œ ì •ë³´ ë¿ë§Œ ì•„ë‹ˆë¼ ìì‹ ì´ ì˜ˆë¹„ ìš”ì²­ ì´í›„ì— ë³´ë‚¼ ë³¸ ìš”ì²­ì— ëŒ€í•œ ë‹¤ë¥¸ ì •ë³´ë“¤ë„ í•¨ê»˜ ì „ì†¡ í•œë‹¤. ì–´ë–¤ í—¤ë”ë¥¼ í¬í•¨ í•  ê²ƒì¸ì§€, ì–´ë–¤ HTTP ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ì„ ë³´ë‚¼ ê²ƒì¸ì§€ ë§ì´ë‹¤.

### Simple Request

**`Preflight`**Â ìš”ì²­ê³¼ëŠ” ë‹¬ë¦¬, ì˜ˆë¹„ ìš”ì²­ì„ ë³´ë‚´ì§€ ì•Šê³ ,Â **ì„œë²„ì—ê²Œ ë°”ë¡œ ë³¸ ìš”ì²­ì„ ì „ì†¡**í•œë‹¤.ì´ í›„ ì„œë²„ê°€ ì‘ë‹µ í—¤ë”ì—Â **`Access-Control-Allow-Origin`**ê³¼ ê°™ì€ ê°’ì„ ë³´ë‚´ì£¼ë©´ ê·¸ë•Œ ë¸Œë¼ìš°ì €ê°€ CORS ì •ì±… ìœ„ë°˜ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•˜ëŠ” ë°©ì‹ì´ë‹¤.

### ğŸ‘‰ğŸ» ë™ì‘ ì¡°ê±´

1. ìš”ì²­ì˜ ë©”ì†Œë“œëŠ”Â **`GET`**,Â **`HEAD`**,Â **`POST`**Â ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•œë‹¤.
2. **`Accept`**,Â **`Accept-Language`**,Â **`Content-Language`**,Â **`Content-Type`**,Â **`DPR`**,Â **`Downlink`**,Â **`Save-Data`**,Â **`Viewport-Width`**,Â **`Width`**Â ì™¸ì˜ ë‹¤ë¥¸ í—¤ë”ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.
3. ë§Œì•½Â **`Content-Type`**ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ”Â **`application/x-www-form-urlencoded`**,Â **`multipart/form-data`**,Â **`text/plain`**ë§Œ í—ˆìš©ëœë‹¤.

- 1ë²ˆ ì¡°ê±´ì˜ ê²½ìš° ê·¸ë¦¬ ê¹Œë‹¤ë¡­ì§€ëŠ” ì•Šë‹¤.
- 2ë²ˆì˜ ëª…ì‹œëœ í—¤ë”ë“¤ì€ ì •ë§ ê¸°ë³¸ì ì¸ í—¤ë”ë“¤ì´ë‹¤. ë³µì¡í•˜ê³  ìƒìš©í™”ëœ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì´ í—¤ë”ë“¤ ì™¸ì— ì¶”ê°€ì ì¸ í—¤ë”ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°ëŠ” ì°¾ê¸° í˜ë“¤ë‹¤. ì¸ì¦ ë™ì‘ì„ ìœ„í•œÂ **`Authoriztion`**Â í—¤ë”ë§Œ í•˜ë”ë¼ë„ ì € ì¡°ê±´ì„ ì§€í‚¬ ìˆ˜ ì—†ë‹¤.
- ì˜¤ëŠ˜ ë‚ ì˜ REST í˜¹ì€ HTTP APIë“¤ì€Â **`text/xml`**ì´ë‚˜Â **`application/json`**Â ì»¨í…ì¸  íƒ€ì…ì„ ê°€ì§€ë„ë¡ ì„¤ê³„ ë˜ê¸° ë•Œë¬¸ì— ì‚¬ì‹¤ ìƒ ì¡°ê±´ì„ ì¶©ì¡±ì‹œí‚¤ê¸°ë€ ì‰½ì§€ ì•Šë‹¤.

### Credentialed Request.

ì¸ì¦ëœ ìš”ì²­ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

ë‹¤ë¥¸ ì¶œì²˜ ê°„ í†µì‹ ì˜ ì¢€ ë” ë³´ì•ˆì„ ê°•í™”í•˜ê³ ì í•  ë•Œ ì‚¬ìš©í•œë‹¤. ë¸Œë¼ìš°ì €ê°€ ì œê³µí•˜ëŠ” ë¹„ë™ê¸° ë¦¬ì†ŒìŠ¤ ìš”ì²­ APIì¸Â **`XMLHttpRequest`**Â ê°ì²´ë‚˜Â **`fetch API`**ëŠ” ë³„ë„ì˜ ì˜µì…˜ ì—†ì´ ë¸Œë¼ìš°ì €ì˜ ì¿ í‚¤ ì •ë³´ë‚˜ ì¸ì¦ê³¼ ê´€ë ¨ëœ í—¤ë”ë¥¼ í•¨ë¶€ë¡œ ìš”ì²­ì— ë‹´ì§€ ì•ŠëŠ”ë‹¤. ì´ë•Œ ìš”ì²­ì— ì¸ì¦ê³¼ ê´€ë ¨ëœ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì˜µì…˜ì´ ë°”ë¡œÂ **`credentials`**Â ì˜µì…˜ì´ë‹¤.

credentialsë„ ì„¸ê°€ì§€ ì˜µì…˜ì„ ê°€ì§€ê³  ìˆë‹¤.

- **`same-origin`**Â : ê°™ì€ ì¶œì²˜ ê°„ ìš”ì²­ì—ë§Œ ì¸ì¦ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆë‹¤.
- **`include`**Â : ëª¨ë“  ìš”ì²­ì— ì¸ì¦ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆë‹¤.
- **`omit`**Â - : ëª¨ë“  ìš”ì²­ì— ì¸ì¦ ì •ë³´ë¥¼ ë‹´ì§€ ì•ŠëŠ”ë‹¤.

> ğŸ‘‰ğŸ» ë‹¤ë¥¸ ì¶œì²˜ ì‚¬ì´íŠ¸ë¡œì˜ ìš”ì²­ì— ì¿ í‚¤ì™€ ê°™ì€ ì¸ì¦ì •ë³´ë¥¼ í¬í•¨ì‹œí‚¤ê³ ì í•œë‹¤ë©´ ?â†’Â credentials: 'include'Â ì˜µì…˜ì„ ì¶”ê°€
> 

### ğŸ‘‰ğŸ» ë™ì‘ ì¡°ê±´

1. **`Access-Control-Allow-Origin: *`**Â ì´ë©´ ì•ˆë˜ë©°,Â **ëª…ì‹œì ì¸ URL**ì„ ì„¤ì •í•˜ì—¬í– í•œë‹¤.ex)Â **Access-Control-Allow-Origin:Â [https://xxx.com](https://xxx.com/)**
2. ì‘ë‹µ í—¤ë”ì—ëŠ” ë°˜ë“œì‹œÂ **`Access-Control-Allow-Credentials: true`**ê°€ ì¡´ì¬í•´ì•¼í•œë‹¤.

**[ì¶œì²˜]**

[https://developer.mozilla.org/ko/docs/Web/HTTP/CORS](https://developer.mozilla.org/ko/docs/Web/HTTP/CORS)

[https://velog.io/@pilyeooong/CORSë€-ë¬´ì—‡ì¸ê°€](https://velog.io/@pilyeooong/CORS%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)

[https://hannut91.github.io/blogs/infra/cors](https://hannut91.github.io/blogs/infra/cors)